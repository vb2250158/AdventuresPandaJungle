window.__require=function t(e,i,s){function n(a,c){if(!i[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var h="function"==typeof __require&&__require;if(!c&&h)return h(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+a+"'")}}var p=i[a]={exports:{}};e[a][0].call(p.exports,function(t){return n(e[a][1][t]||t)},p,p.exports,t,e,i,s)}return i[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<s.length;a++)n(s[a]);return n}({Die:[function(t,e,i){"use strict";cc._RF.push(e,"1592fqW2PZIHZohqCC8Z6qg","Die"),cc.Class({extends:cc.Component,properties:{},start:function(){},onCollisionEnter:function(t,e){window.GameMap.End()}}),cc._RF.pop()},{}],Map:[function(t,e,i){"use strict";cc._RF.push(e,"c90edlCoFZBipdCY5MvD94i","Map");var s=new cc.Vec2;cc.Class({extends:cc.Component,properties:{lineSize:0,gridSize:cc.Vec2,player:cc.Prefab,controller:cc.Node,obstacles:cc.Prefab,road:cc.Prefab,mapObjects:[],camera:cc.Node,EndUI:cc.Node,_gameEnd:!1},getGamePosi:function(t,e){return new cc.Vec2(this.gridSize.x*t,this.gridSize.y*e)},onLoad:function(){this.player={node:cc.instantiate(this.player),posi:new cc.Vec2(parseInt(this.lineSize/2),0)},this.player.node.parent=this.node,this.updatePosi(this.player.node,this.player.posi),this.camera.x=this.player.node.x-300;for(var t=[];t.length<this.lineSize;)t.push(0);this.mapObjects.push(t),this.controller.on("touchstart",function(t){s=t.getLocation()},this),this.controller.on("touchend",function(t){var e=t.getLocation().x-s.x,i=t.getLocation().y-s.y;0==e&&0==i||Math.abs(e)+Math.abs(i)<20?this.up():Math.abs(e)>Math.abs(i)?e>0?this.right():this.left():i>0?this.up():this.down()},this),this.updateObject(),window.GameMap=this,this.EndUI.on("touchend",function(t){cc.director.loadScene("MainGame")},this),cc.director.getCollisionManager().enabled=!0},End:function(){this.EndUI.active=!0,this._gameEnd=!0},update:function(t){},judgementObstacle:function(t){return 1==this.mapObjects[t.y][t.x]||t.x<0||t.y<0||t.x>=this.lineSize},updatePosi:function(t,e){t.position=this.getGamePosi(e.x,e.y)},create:function(t,e){var i=cc.instantiate(t);i.parent=this.node,this.updatePosi(i,e)},up:function(){this.judgementObstacle({x:this.player.posi.x,y:this.player.posi.y+1})||(this.player.posi.y++,this.updatePosi(this.player.node,this.player.posi),this.updateObject())},down:function(){this.judgementObstacle({x:this.player.posi.x,y:this.player.posi.y-1})||(this.player.posi.y--,this.updatePosi(this.player.node,this.player.posi))},left:function(){this.judgementObstacle({x:this.player.posi.x-1,y:this.player.posi.y})||(this.player.posi.x--,this.updatePosi(this.player.node,this.player.posi))},right:function(){this.judgementObstacle({x:this.player.posi.x+1,y:this.player.posi.y})||(this.player.posi.x++,this.updatePosi(this.player.node,this.player.posi))},updateObject:function(){for(;this.player.posi.y+20>this.mapObjects.length;)Math.random()>.5?this.buildRoad():this.buildLine()},buildRoad:function(){for(var t=[];t.length<this.lineSize;)t.push(0);this.mapObjects.push(t),this.create(this.road,{x:0,y:this.mapObjects.length-1})},buildLine:function(){for(var t=[];t.length<this.lineSize;).1>Math.random()?t.push(1):t.push(0);this.mapObjects.push(t);for(var e=0;e<t.length;e++){switch(t[e]){case 1:this.create(this.obstacles,{x:e,y:this.mapObjects.length-1})}}},lateUpdate:function(){var t=this.player.node.y-this.camera.y;Math.abs(t)>10&&(this.camera.y+=.1*t);var e=this.player.node.x-300-this.camera.x;Math.abs(e)>200&&(this.camera.x+=.1*e)}}),cc._RF.pop()},{}],Move:[function(t,e,i){"use strict";cc._RF.push(e,"aef08Rj38RHnYjldAy5cZfz","Move"),cc.Class({extends:cc.Component,properties:{speed:0},onLoad:function(){this.speed*=1.5*Math.random()},update:function(t){this.node.x+=this.speed*t}}),cc._RF.pop()},{}],Road:[function(t,e,i){"use strict";cc._RF.push(e,"87fa9+Z13pKeatlP91u1h/Z","Road"),cc.Class({extends:cc.Component,properties:{moveObjects:[cc.Prefab],intervalTime:3,_countDown:3},start:function(){this.intervalTime=2*Math.random()+this.intervalTime},update:function(t){if(this._countDown<=0){if(Math.random()<.5){var e=parseInt(Math.random()*this.moveObjects.length),i=cc.instantiate(this.moveObjects[e]);i.parent=this.node,i.x=0,i.y=0}else{var s=parseInt(Math.random()*this.moveObjects.length),n=cc.instantiate(this.moveObjects[s]);n.parent=this.node,n.getComponent("Move").speed*=-1,n.x=900,n.y=0}this._countDown=this.intervalTime}else this._countDown-=t}}),cc._RF.pop()},{}]},{},["Die","Map","Move","Road"]);